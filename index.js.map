{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n\nexport const fetchPhoto = (searchedQuery, currentPage) => {\n  const axiosOptions = {\n    params: {\n      key: `48573229-d00ec4466a1952407b35369c3`,\n      q: searchedQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: currentPage,\n      per_page: 15,\n    },\n  };\n\n  return axios.get(`https://pixabay.com/api/`, axiosOptions);\n};","export function createImageCard({\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  }) {\n    return `\n        <a href=\"${largeImageURL}\" class=\"gallery-item\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" />\n            <div class=\"info\">\n                <p class=\"text-image\"><b>Likes:</b> ${likes}</p>\n                <p class=\"text-image\"><b>Views:</b> ${views}</p>\n                <p class=\"text-image\"><b>Comments:</b> ${comments}</p>\n                <p class=\"text-image\"><b>Downloads:</b> ${downloads}</p>\n            </div>\n        </a>\n    `;\n  }","import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\n\nimport { fetchPhoto } from './js/pixabay-api';\nimport { createImageCard } from './js/render-functions';\n\nconst searchFormEl = document.querySelector('.js-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtn = document.querySelector('.js-load-more-btn');\n\nlet searchedQuery = ''; \nlet page = 1;\nconst perPage = 15;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\nconst onSearchFormSubmit = async event => {\n    try {\n      event.preventDefault();\n  \nconst inputQuery = event.currentTarget.elements.searchQuery.value.trim();\n  \n    if (inputQuery === '') {\n        iziToast.error({\n          title: 'Error',\n          message: `Please enter your request`,\n        });\n  \n        return;\n      }\n    if (inputQuery !== searchedQuery) {\n        searchedQuery = inputQuery;\n        page = 1; \n        galleryEl.innerHTML = '';\n        loadMoreBtn.classList.add(`hidden`);\n      }\n\n    const response = await fetchPhoto(searchedQuery, page);\n\n    if (response.data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: `Sorry, your request is incorrect. Please try again!`,\n      });\n\n      return;\n    }\n    renderGallery(response.data.hits);\n    iziToast.success({\n      title: 'Success',\n      message: `Found ${response.data.totalHits} images!`,\n    });\n\n    if (response.data.totalHits > perPage) {\n      loadMoreBtn.classList.remove(`hidden`);\n    }\n  } catch (err) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Sorry, there was an error. Please try again!',\n    });\n    console.log(err);\n  }\n};\n\nconst loadMoreBtnClick = async () => {\n    try {\n      page += 1; \n      loadMoreBtn.classList.add(`hidden`);\n  \n      const response = await fetchPhoto(searchedQuery, page);\n\n      if (response.data.hits.length === 0) {\n        iziToast.info({\n          title: 'End',\n          message: `We're sorry, but you've reached the end of search results.`,\n        });\n        loadMoreBtn.classList.add(`hidden`); \n        return;\n      }\n  \n      renderGallery(response.data.hits);\n  \n      if (page * perPage >= response.data.totalHits) {\n        iziToast.info({\n          title: 'End',\n          message: `We're sorry, but you've reached the end of search results.`,\n        });\n        loadMoreBtn.classList.add(`hidden`);\n      } else {\n        loadMoreBtn.classList.remove(`hidden`);\n      }\n  \n      const { height: cardHeight } =\n        galleryEl.firstElementChild.getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    } catch (err) {\n      iziToast.error({\n        title: 'Error',\n        message: `An error occurred: the image could not be loaded. Please try again!`,\n      });\n      console.error(err);\n    }\n  };\n  \n  const renderGallery = images => {\n    const galleryTemplate = images.map(createImageCard).join('');\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n    lightbox.refresh();\n  };\n  \n  searchFormEl.addEventListener('submit', onSearchFormSubmit);\n  loadMoreBtn.addEventListener('click', loadMoreBtnClick);\n  "],"names":["fetchPhoto","searchedQuery","currentPage","axiosOptions","axios","createImageCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchFormEl","galleryEl","loadMoreBtn","page","perPage","lightbox","SimpleLightbox","onSearchFormSubmit","event","inputQuery","iziToast","response","renderGallery","err","loadMoreBtnClick","cardHeight","images","galleryTemplate"],"mappings":"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"}